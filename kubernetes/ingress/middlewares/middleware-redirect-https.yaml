# =============================================================================
# Middleware - Redirection HTTP â†’ HTTPS
# =============================================================================
# Redirige toutes les requetes HTTP (port 80) vers HTTPS (port 443).
# Redirection permanente (301) pour que les navigateurs memorisent.
#
# Note : Cette redirection est aussi configuree au niveau entryPoint
# dans traefik.yaml, mais ce middleware peut etre utilise
# explicitement sur des IngressRoutes specifiques.
# =============================================================================
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: redirect-https
  namespace: ingress
  labels:
    app: traefik
    app.kubernetes.io/name: traefik
    app.kubernetes.io/component: middleware
  annotations:
    description: "Redirection HTTP vers HTTPS permanente (301)"
spec:
  redirectScheme:
    scheme: https
    permanent: true
