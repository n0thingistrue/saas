# =============================================================================
# Secret Backend NestJS Credentials - EXEMPLE
# =============================================================================
# Commande pour creer le SealedSecret :
#   kubectl create secret generic backend-secrets \
#     --namespace production \
#     --from-literal=DATABASE_PASSWORD='MotDePasseDBForT!2024' \
#     --from-literal=REDIS_PASSWORD='MotDePasseRedisForT!' \
#     --from-literal=LDAP_BIND_PASSWORD='MotDePasseBindForT!' \
#     --from-literal=JWT_SECRET='SuperSecretJWT256BitsMinimum!2024' \
#     --from-literal=JWT_REFRESH_SECRET='SuperSecretRefreshJWT256Bits!2024' \
#     --dry-run=client -o yaml | \
#   kubeseal --format yaml \
#     > kubernetes/secrets/backend-sealed.yaml
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: backend-secrets
  namespace: production
  labels:
    app: backend
    app.kubernetes.io/name: backend
    app.kubernetes.io/component: credentials
type: Opaque
stringData:
  # Mot de passe PostgreSQL pour l'utilisateur saas_app
  DATABASE_PASSWORD: "CHANGE_ME_database_password"
  # Mot de passe Redis (requirepass)
  REDIS_PASSWORD: "CHANGE_ME_redis_password"
  # Mot de passe LDAP Bind (CN=app-backend,OU=Services)
  LDAP_BIND_PASSWORD: "CHANGE_ME_ldap_bind_password"
  # Cle secrete JWT pour signer les access tokens (min 256 bits)
  JWT_SECRET: "CHANGE_ME_jwt_secret_min_32_chars"
  # Cle secrete JWT pour signer les refresh tokens (min 256 bits)
  JWT_REFRESH_SECRET: "CHANGE_ME_jwt_refresh_secret_min_32_chars"
